
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>github_watcher &#8212; github_watcher 3.6 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="github-watcher">
<h1>github_watcher<a class="headerlink" href="#github-watcher" title="Permalink to this headline">¶</a></h1>
<p><cite>github_watcher</cite> watches for pull requests on repositories you specify. When it finds them, it checks them against directories, files, and lines in which you’re interested in keeping an eye out for changes. If something is changed, it will send you a desktop notification (Linux and OSX only).</p>
<p>This project is developed in Python3. You can install it with <cite>pip3</cite> from the python package index:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install github_watcher
</pre></div>
</div>
<p>After that it will be added to your <cite>PATH</cite>. To get it configured and running on your machine you can either add your own configuration manually (details below) or you can run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>github-watcher config
</pre></div>
</div>
<p>To run through a prompt. It will write a file at <cite>~/.github-watcher.yml</cite>. Feel free to modify that file as your needs change.</p>
<div class="section" id="manual-configuration">
<h2>Manual Configuration<a class="headerlink" href="#manual-configuration" title="Permalink to this headline">¶</a></h2>
<p><cite>~/.github-watcher.yml</cite> has a few components.</p>
<div class="section" id="adding-a-project">
<h3>Adding a Project<a class="headerlink" href="#adding-a-project" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">&lt;github username&gt;</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">&lt;project name&gt;</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">&lt;file name to watch&gt;</span>
            <span class="l l-Scalar l-Scalar-Plain">- [&lt;starting line in that file&gt;, &lt;ending line in that file&gt;]</span>
            <span class="l l-Scalar l-Scalar-Plain">- [&lt;another starting line in that file&gt;, &lt;another ending line in that file&gt;]</span>
</pre></div>
</div>
<p>For example, if I wanted to watch the source file for the lines you’re currently reading I would use:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">akellehe</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">github-watcher</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">docs/source/index.rst</span>
            <span class="l l-Scalar l-Scalar-Plain">- [38, 40]</span>
</pre></div>
</div>
<p>Now if someone submits a pull request against those lines, you’ll be notified.</p>
</div>
<div class="section" id="configuring-authentication">
<h3>Configuring Authentication<a class="headerlink" href="#configuring-authentication" title="Permalink to this headline">¶</a></h3>
<p>Clearly not every project will be accessible to the public, so you’ll need to add an access token. You can generate one on github pretty easily.</p>
<p>Go to the settings option in the profile tab in the upper right corner when you log in.</p>
<a class="reference internal image-reference" href="_images/click_settings_under_your_profile_tab_in_the_top_right_corner.png"><img alt="Image of the profile dropdown tab in github" src="_images/click_settings_under_your_profile_tab_in_the_top_right_corner.png" style="width: 200px;" /></a>
<p>Next, on the settings page click “Developer Settings” at the bottom of the menu on the left-hand side.</p>
<a class="reference internal image-reference" href="_images/click_developer_settings_on_the_bottom_left_of_the_page.png"><img alt="Image of the left-hand menu from the settings tab with developer settings at the bottom." src="_images/click_developer_settings_on_the_bottom_left_of_the_page.png" style="width: 200px;" /></a>
<p>On the Developer Settings page click on “Personal Access Tokens” at the bottom of the menu to the left of the page.</p>
<a class="reference internal image-reference" href="_images/click_personal_access_tokens_on_the_left.png"><img alt="Image of the menu on the left of the &quot;Developer Settings&quot; page." src="_images/click_personal_access_tokens_on_the_left.png" style="width: 200px;" /></a>
<p>Once you’ve opened the “Personal Access Tokens” page, click the button to the right labeled “Generate New Token”.</p>
<a class="reference internal image-reference" href="_images/click_generate_new_token_on_the_right.png"><img alt="Image of the &quot;Generate New Token&quot; button to the right of the &quot;Personal Access Tokens&quot; page." src="_images/click_generate_new_token_on_the_right.png" style="width: 500px;" /></a>
<p>That token needs to have “User” and “Repo” scopes for <cite>github_watcher</cite> to analyze all the pull requests.</p>
<a class="reference internal image-reference" href="_images/token-scopes.png"><img alt="Image of the scopes menu with &quot;User&quot; selected." src="_images/token-scopes.png" style="width: 500px;" /></a>
<p>Once you’ve selected both “User” and “Repo” scopes, hit the green “Generate Token” button at the bottom of that menu.</p>
<a class="reference internal image-reference" href="_images/generate_token.png"><img alt="Image of the &quot;Generate Token&quot; button." src="_images/generate_token.png" style="width: 500px;" /></a>
<p>Your token will be listed on the next page. Copy it somewhere safe! This will be your only chance to record it. You will have to revoke and regenerate tokens from this point on.</p>
<p>Now that you have your access token, you have to add it to your <cite>~/.github-watcher.yml</cite> file.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">github_api_secret_token</span><span class="p p-Indicator">:</span> <span class="s">&#39;*****&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">akellehe</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">github-watcher</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">docs/source/index.rst</span>
            <span class="l l-Scalar l-Scalar-Plain">- [38, 40]</span>
</pre></div>
</div>
<p>You can record your access token in the place you see the asteriks above. After you’ve completed this step, if you’re using the publicly hosted github you’re done! If you’re using an enterprise build then you’ll have to add the api base url to the configuration.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">github_api_secret_token</span><span class="p p-Indicator">:</span> <span class="s">&#39;*****&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">github_api_base_url</span><span class="p p-Indicator">:</span> <span class="s">&#39;https://github.example.com/api/v3&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">akellehe</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">github-watcher</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">docs/source/index.rst</span>
            <span class="l l-Scalar l-Scalar-Plain">- [38, 40]</span>
</pre></div>
</div>
<p>Then you can run it!</p>
</div>
<div class="section" id="running-github-watcher">
<h3>Running github_watcher<a class="headerlink" href="#running-github-watcher" title="Permalink to this headline">¶</a></h3>
<p>To set up <cite>github_watcher</cite> as a daemon, you can just run it like</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>github-watcher run
</pre></div>
</div>
<p>If something is going funky you can get verbose output like</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>github-watcher run --verbose
</pre></div>
</div>
<p>There are a bunch of other options you can pass. Get a complete listing by passing the “help” flag</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>github-watcher --help
</pre></div>
</div>
<div class="toctree-wrapper compound">
</div>
</div>
</div>
<div class="section" id="module-github_watcher.commands.run">
<span id="for-developers"></span><h2>For Developers<a class="headerlink" href="#module-github_watcher.commands.run" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-run-command-module">
<h3>The Run Command Module<a class="headerlink" href="#the-run-command-module" title="Permalink to this headline">¶</a></h3>
<p>This module contains the business logic for the <cite>watch</cite> functionality. It interprets configurations and evaluates files
against those configurations.</p>
<p>It also manages alerting on those files across Linux and Darwin systems.</p>
<dl class="function">
<dt id="github_watcher.commands.run.alert">
<code class="descclassname">github_watcher.commands.run.</code><code class="descname">alert</code><span class="sig-paren">(</span><em>file: str, range: Tuple[int, int], pr_link: str</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/github_watcher/commands/run.html#alert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#github_watcher.commands.run.alert" title="Permalink to this definition">¶</a></dt>
<dd><p>Alerts that a file has been changed over range <cite>range</cite>. Also provides a link as supported by the target system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the file that has been changed.</li>
<li><strong>range</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a>) – The range over which the change coincides with the watcher configuration.</li>
<li><strong>pr_link</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – A link to the pull request containing the change.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="github_watcher.commands.run.are_watched_lines">
<code class="descclassname">github_watcher.commands.run.</code><code class="descname">are_watched_lines</code><span class="sig-paren">(</span><em>watchpaths</em>, <em>filepath</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/github_watcher/commands/run.html#are_watched_lines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#github_watcher.commands.run.are_watched_lines" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>watchpaths</strong> – </li>
<li><strong>filepath</strong> – </li>
<li><strong>start</strong> – </li>
<li><strong>end</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="github_watcher.commands.run.contains_watched_regex">
<code class="descclassname">github_watcher.commands.run.</code><code class="descname">contains_watched_regex</code><span class="sig-paren">(</span><em>conf: Dict</em>, <em>blob: str</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/github_watcher/commands/run.html#contains_watched_regex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#github_watcher.commands.run.contains_watched_regex" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches a blob of text for a match to the regexes configured as the <cite>watched_regexes</cite> attribute of <cite>conf</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>conf</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A github-watcher configuration. If it contains <cite>watched_regexes</cite> we’ll check those here.</li>
<li><strong>blob</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – A blob of text to check for the regex.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True if <cite>blob</cite> contains one of the configured regexes.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="github_watcher.commands.run.is_watched_directory">
<code class="descclassname">github_watcher.commands.run.</code><code class="descname">is_watched_directory</code><span class="sig-paren">(</span><em>conf: Dict</em>, <em>user: str</em>, <em>repo: str</em>, <em>hunk_path: str</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/github_watcher/commands/run.html#is_watched_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#github_watcher.commands.run.is_watched_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines whether or not the file at <cite>user/repo/hunk_path</cite> is watched based on whether or not it lies in a
directory specified by <cite>conf</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>conf</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – The configuration under which to assess the file.</li>
<li><strong>user</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The owner of the repository, <cite>repo</cite>, in which the file resides.</li>
<li><strong>repo</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The repo owned by <cite>owner</cite>, in which this file resides.</li>
<li><strong>hunk_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The relative path to the file to evaluate against <cite>conf</cite> in order to determine whether or not it is watched.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A boolean value specifying whether or not <cite>hunk_path</cite> is watched under <cite>conf</cite>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="github_watcher.commands.run.is_watched_file">
<code class="descclassname">github_watcher.commands.run.</code><code class="descname">is_watched_file</code><span class="sig-paren">(</span><em>conf: Dict</em>, <em>user: str</em>, <em>repo: str</em>, <em>hunk_path: str</em><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/github_watcher/commands/run.html#is_watched_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#github_watcher.commands.run.is_watched_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines whether or not the file at <cite>user/repo/hunk_path</cite> is watched based on the configuration passed as <cite>conf</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>conf</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – The configuration under which to assess the file.</li>
<li><strong>user</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The owner of the repository, <cite>repo</cite>, in which the file resides.</li>
<li><strong>repo</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The repo owned by <cite>owner</cite>, in which this file resides.</li>
<li><strong>hunk_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The relative path to the file to evaluate against <cite>conf</cite> in order to determine whether or not it is watched.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A boolean value specifying whether or not <cite>hunk_path</cite> is watched under <cite>conf</cite>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">github_watcher</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Andrew Kelleher.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>